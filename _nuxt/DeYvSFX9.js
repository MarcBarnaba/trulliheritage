import{a as te,_ as ne}from"./KewpumrL.js";import{d as ee,E as se,r as k,c as o,a as e,b as G,t as a,q as p,s as ae,F as g,v as x,u as f,B as $,H as Q,R as I,S as le,I as oe,o as l,z as re,J as ie,K as de,L as Z,l as ce}from"./nw_6AWgi.js";import{a as pe,u as me,q as ue}from"./BDd8L2hZ.js";const ge={class:""},xe={class:"relative h-64 md:h-80 overflow-hidden"},fe=["src"],he={class:"absolute bottom-0 left-0 w-full p-8 text-white"},be={class:"container"},_e={class:"text-3xl md:text-4xl font-bold"},ve={class:"flex items-center mt-2"},ye={key:0,class:"flex items-center"},we={class:"ml-1"},ke={key:1,class:"mx-3"},$e={class:"flex items-center"},Ie={class:"ml-1"},Ce={class:"w-full px-8 pb-8"},De={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},Xe={class:"lg:col-span-2"},Se={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},ze={class:"border rounded-lg p-4"},Be={class:"space-y-3"},Te={class:"flex items-center"},Ne={class:"flex items-center"},Ve={class:"flex items-center"},Ee={class:"flex flex-wrap gap-2"},Re={class:"border rounded-lg p-4"},Ae={class:"space-y-3"},je={key:0,class:"border rounded-lg p-4"},Fe={class:"space-y-3"},Me={key:0,class:"mb-8"},Pe={class:"mt-6 grid md:grid-cols-2 gap-6"},Ue={class:"flex justify-between items-start mb-3"},qe={class:"font-bold"},He={class:"flex"},Je={class:"text-gray-600 italic"},Le={key:0,class:"mt-2 text-sm text-gray-500"},We={key:1,class:"mb-8"},Ke={class:"text-xl font-semibold mb-4"},Oe=["src"],Ye={class:"bg-white rounded-lg shadow-md p-6 sticky top-[100px]"},Ge={class:"flex items-baseline justify-between mb-4"},Qe={class:"text-2xl font-bold text-emerald-600"},Ze={class:"border-t border-b py-4 my-4"},es={class:"flex items-center mb-4"},ss=["src","alt"],ts={class:"font-medium"},ns={class:"text-gray-700 text-sm"},as={class:"mb-4"},ls=["value"],os=["href"],rs=ee({__name:"Experience",props:{experience:{}},setup(C){const{t:m}=se(),h=C,i=k(new Date().toISOString().split("T")[0]),u=k("2"),d=k(""),r=t=>t!=null&&t.length?(t.reduce((_,v)=>_+v.rating,0)/t.length).toFixed(1):0,w=t=>{try{const s=new Date(t);return new Intl.DateTimeFormat("it-IT",{year:"numeric",month:"long",day:"numeric"}).format(s)}catch{return t}},b=()=>{const t="39XXXXXXXXXX",s=encodeURIComponent(`Ciao ${h.experience.host.name}, sono interessato alla tua esperienza "${h.experience.title}" per il giorno ${i.value} con ${u.value} partecipanti. ${d.value?"Note: "+d.value:""}`);return`https://wa.me/${t}?text=${s}`};return(t,s)=>{var y,D,X,S,z,B,T,N,V,E,R,A,j,F,M,P,U,q,H,J,L,W,K,O;const _=ne,v=te;return l(),o("div",ge,[e("section",xe,[e("img",{src:((y=t.experience)==null?void 0:y.coverImage)||"/api/placeholder/1200/400",alt:"Experience Cover Image",class:"w-full h-full object-cover"},null,8,fe),s[6]||(s[6]=e("div",{class:"absolute inset-0 bg-gradient-to-b from-transparent to-black/60"},null,-1)),e("div",he,[e("div",be,[e("h1",_e,a((D=t.experience)==null?void 0:D.title),1),e("div",ve,[(S=(X=t.experience)==null?void 0:X.reviews)!=null&&S.length?(l(),o("span",ye,[s[3]||(s[3]=e("span",{class:"material-icons text-amber-400 text-sm"},"star",-1)),e("span",we,a(r(t.experience.reviews)),1),s[4]||(s[4]=e("span",{class:"mx-1"},"·",-1)),e("span",null,a((z=t.experience)==null?void 0:z.reviews.length)+" "+a(((B=t.experience)==null?void 0:B.reviews.length)===1?"recensione":"recensioni"),1)])):p("",!0),(N=(T=t.experience)==null?void 0:T.reviews)!=null&&N.length?(l(),o("span",ke,"|")):p("",!0),e("span",$e,[s[5]||(s[5]=e("span",{class:"material-icons text-white text-sm"},"location_on",-1)),e("span",Ie,a((V=t.experience)==null?void 0:V.location),1)])])])])]),G(v,{align:"left",title:"Descrizione",paragraph:(E=t.experience)==null?void 0:E.description,"title-size":"2xl"},{default:ae(()=>[G(_)]),_:1},8,["paragraph"]),e("div",Ce,[e("div",De,[e("div",Xe,[e("section",null,[s[15]||(s[15]=e("h2",{class:"text-2xl font-semibold mb-6"},"Caratteristiche",-1)),e("div",Se,[e("div",ze,[s[10]||(s[10]=e("h3",{class:"text-lg font-medium mb-4"},"Informazioni",-1)),e("ul",Be,[e("li",Te,[s[7]||(s[7]=e("span",{class:"material-icons text-gray-600 mr-2"},"schedule",-1)),e("span",null,"Durata: "+a((R=t.experience)==null?void 0:R.duration),1)]),e("li",Ne,[s[8]||(s[8]=e("span",{class:"material-icons text-gray-600 mr-2"},"groups",-1)),e("span",null,"Max "+a((A=t.experience)==null?void 0:A.maxParticipants)+" partecipanti",1)]),e("li",Ve,[s[9]||(s[9]=e("span",{class:"material-icons text-gray-600 mr-2"},"translate",-1)),e("div",Ee,[(l(!0),o(g,null,x(t.experience.languages,(n,c)=>(l(),o("span",{key:`lang-${c}`,class:"px-2 py-1 bg-gray-100 rounded-full text-sm uppercase"},a(n),1))),128))])])])]),e("div",Re,[s[12]||(s[12]=e("h3",{class:"text-lg font-medium mb-4"},"Incluso",-1)),e("ul",Ae,[(l(!0),o(g,null,x((j=t.experience)==null?void 0:j.included,(n,c)=>(l(),o("li",{key:`included-${c}`,class:"flex items-center"},[s[11]||(s[11]=e("span",{class:"material-icons text-gray-600 mr-2"},"check_circle",-1)),e("span",null,a(n),1)]))),128))])]),(M=(F=t.experience)==null?void 0:F.whatToBring)!=null&&M.length?(l(),o("div",je,[s[14]||(s[14]=e("h3",{class:"text-lg font-medium mb-4"},"Cosa portare",-1)),e("ul",Fe,[(l(!0),o(g,null,x(t.experience.whatToBring,(n,c)=>(l(),o("li",{key:`bring-${c}`,class:"flex items-center"},[s[13]||(s[13]=e("span",{class:"material-icons text-gray-600 mr-2"},"luggage",-1)),e("span",null,a(n),1)]))),128))])])):p("",!0)])]),(U=(P=t.experience)==null?void 0:P.reviews)!=null&&U.length?(l(),o("section",Me,[s[16]||(s[16]=e("h3",{class:"text-xl font-semibold mb-4"},"Recensioni",-1)),e("div",Pe,[(l(!0),o(g,null,x(t.experience.reviews,(n,c)=>(l(),o("div",{key:`review-${c}`,class:"bg-white p-6 rounded-lg shadow-md"},[e("div",Ue,[e("h4",qe,a(n.name),1),e("div",He,[(l(),o(g,null,x(5,Y=>e("span",{key:Y,class:re(["material-icons text-sm",Y<=n.rating?"text-yellow-500":"text-gray-300"])}," star ",2)),64))])]),e("p",Je,'"'+a(n.text)+'"',1),n.date?(l(),o("p",Le,a(w(n.date)),1)):p("",!0)]))),128))])])):p("",!0),(q=t.experience)!=null&&q.mapsSrc?(l(),o("div",We,[e("h3",Ke,a(f(m)("position")),1),e("iframe",{id:"map",src:t.experience.mapsSrc,width:"100%",height:"300",style:{border:"0"},loading:"lazy",referrerpolicy:"no-referrer-when-downgrade"},null,8,Oe)])):p("",!0)]),e("div",null,[e("div",Ye,[e("div",Ge,[e("span",Qe,"€"+a((H=t.experience)==null?void 0:H.price),1),s[17]||(s[17]=e("span",{class:"text-gray-600"},"a persona",-1))]),e("div",Ze,[s[19]||(s[19]=e("h3",{class:"text-lg font-medium mb-3"},"Il tuo host",-1)),e("div",es,[e("img",{src:((J=t.experience)==null?void 0:J.host.avatar)||"https://avatar.iran.liara.run/public/5",alt:(L=t.experience)==null?void 0:L.host.name,class:"w-12 h-12 rounded-full mr-3"},null,8,ss),e("div",null,[e("p",ts,a((W=t.experience)==null?void 0:W.host.name),1),s[18]||(s[18]=e("p",{class:"text-sm text-gray-600"},"Host esperienza",-1))])]),e("p",ns,a((K=t.experience)==null?void 0:K.host.description),1)]),e("div",as,[s[20]||(s[20]=e("label",{class:"block text-sm font-medium mb-1"},"Data desiderata",-1)),$(e("input",{type:"date",class:"w-full border rounded p-2 mb-3","onUpdate:modelValue":s[0]||(s[0]=n=>I(i)?i.value=n:null)},null,512),[[Q,f(i)]]),s[21]||(s[21]=e("label",{class:"block text-sm font-medium mb-1"},"Numero partecipanti",-1)),$(e("select",{class:"w-full border rounded p-2 mb-3","onUpdate:modelValue":s[1]||(s[1]=n=>I(u)?u.value=n:null)},[(l(!0),o(g,null,x(((O=t.experience)==null?void 0:O.maxParticipants)||1,n=>(l(),o("option",{key:n,value:n},a(n)+" "+a(n===1?"partecipante":"partecipanti"),9,ls))),128))],512),[[le,f(u)]]),s[22]||(s[22]=e("label",{class:"block text-sm font-medium mb-1"},"Note aggiuntive",-1)),$(e("textarea",{class:"w-full border rounded p-2 mb-3",rows:"3","onUpdate:modelValue":s[2]||(s[2]=n=>I(d)?d.value=n:null)},null,512),[[Q,f(d)]])]),e("a",{href:b(),target:"_blank",class:"w-full flex items-center justify-center bg-gray-100 hover:bg-gray-200 text-gray-800 py-3 rounded-lg font-medium transition"},s[23]||(s[23]=[e("span",{class:"material-icons mr-2"},"chat",-1),oe(" Contatta l'host via WhatsApp ")]),8,os)])])])])])}}}),ps=ee({__name:"[slug]",async setup(C){var b,t,s;let m,h;const i=ie(),{locale:u}=se(),d=i.params.slug,{data:r,error:w}=([m,h]=de(()=>me(i.path,()=>ue(`${u.value}_experiences`).where("slug","=",String(d)).first(),"$gJXY2JpIHB")),m=await m,h(),m);if(w.value)throw Z({statusCode:500});if(!r.value)throw Z({statusCode:404});return pe({title:(b=r.value)==null?void 0:b.title,description:(t=r.value)==null?void 0:t.description,ogImage:(s=r.value)==null?void 0:s.coverImage}),(_,v)=>{const y=rs;return f(r)?(l(),ce(y,{key:0,experience:f(r)},null,8,["experience"])):p("",!0)}}});export{ps as default};
